import sys
from os import walk
from os import path


def gen(dirPath):
    _, _, filenames = next(walk(dirPath))

    if len(filenames) == 0:
        print("Can't find .png files in directory: " + dirPath)
        return

    with open("BlueNoiseFileNames.h", "w") as hdr:
        hdr.write("// This file was generated by ListPngFiles.py\n\n")
        hdr.write("#pragma once\n\n")
        hdr.write("namespace RTGL1\n{\n\n")
        hdr.write("constexpr char* const BlueNoiseFileNames[] =\n{\n")
        i = 0
        for name in filenames:
            if name.endswith(".png"):
                hdr.write("    \"" + name + "\",\n")
                i += 1
        hdr.write("};\n\n")
        hdr.write("constexpr int BlueNoiseFileNamesCount = " + str(i) + ";\n")
        hdr.write("\n}")


if __name__ == '__main__':
    if len(sys.argv) > 1:
        gen(sys.argv[1])
    else:
        print("Arguments: <directory path>")
